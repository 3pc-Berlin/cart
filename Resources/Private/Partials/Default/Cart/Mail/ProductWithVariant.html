{namespace cart=Extcode\Cart\ViewHelpers}

<f:section name="variantSection">
    <f:if condition="{variant.beVariants}">
        <f:then>
            <f:for each="{variant.beVariants}" as="beVariant">
                <f:render section="variantSection" arguments="{variant:beVariant, product:product}"/>
            </f:for>
        </f:then>
        <f:else>
            <tr>
                <td>&nbsp;</td>
                <td>
                    <div class="product-name">{variant.title}</div>
                    <p>
                        <f:translate key="tx_cart_domain_model_order_product.sku.short"/>
                        : {variant.sku}
                    </p>
                </td>
                <td style="text-align: right;">
                    <f:format.currency currencySign="{settings.format.currency.currencySign}"
                                       decimalSeparator="{settings.format.currency.decimalSeparator}"
                                       thousandsSeparator="{settings.format.currency.thousandsSeparator}"
                                       prependCurrency="{settings.format.currency.prependCurrency}"
                                       separateCurrency="{settings.format.currency.separateCurrency}"
                                       decimals="{settings.format.currency.decimals}">{variant.priceCalculated}</f:format.currency>
                </td>
                <td style="text-align: right;">
                    {variant.quantity}
                </td>
                <td style="text-align: right;" class="last">
                    <f:format.currency currencySign="{settings.format.currency.currencySign}"
                                       decimalSeparator="{settings.format.currency.decimalSeparator}"
                                       thousandsSeparator="{settings.format.currency.thousandsSeparator}"
                                       prependCurrency="{settings.format.currency.prependCurrency}"
                                       separateCurrency="{settings.format.currency.separateCurrency}"
                                       decimals="{settings.format.currency.decimals}">{variant.gross}</f:format.currency>
                </td>
            </tr>
        </f:else>
    </f:if>

</f:section>

<tr>
    <td colspan="2">
        <div class="product-name">{product.title} - {product.feVariant.value}</div>
    </td>
    <td style="text-align: right;">
        &nbsp;
    </td>
    <td style="text-align: right;">
        &nbsp;
    </td>
    <td style="text-align: right;">
        &nbsp;
    </td>
    <td class="last">
        &nbsp;
    </td>
</tr>

<f:for each="{product.beVariants}" as="beVariant">
    <f:render section="variantSection" arguments="{variant:beVariant, product:product}"/>
</f:for>

<tr>
    <td colspan="2">
        &nbsp;
    </td>
    <td style="text-align: right;">
        &nbsp;
    </td>
    <td style="text-align: right;">
        {product.quantity}
    </td>
    <td style="text-align: right;">
        <f:format.currency currencySign="{settings.format.currency.currencySign}"
                           decimalSeparator="{settings.format.currency.decimalSeparator}"
                           thousandsSeparator="{settings.format.currency.thousandsSeparator}"
                           prependCurrency="{settings.format.currency.prependCurrency}"
                           separateCurrency="{settings.format.currency.separateCurrency}"
                           decimals="{settings.format.currency.decimals}">{product.gross}</f:format.currency>
    </td>
    <td class="last">
        &nbsp;
    </td>
</tr>